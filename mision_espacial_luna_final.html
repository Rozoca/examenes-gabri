<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ Misi√≥n Espacial: Destino Luna</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: white;
            padding: 20px;
            min-height: 100vh;
        }
        
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(15, 12, 41, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.3);
            position: relative;
            z-index: 1;
            border: 2px solid #00ffff;
        }
        
        h1 {
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 0 20px #00ffff;
            color: #00ffff;
        }
        
        .mission-status {
            text-align: center;
            padding: 20px;
            background: rgba(0, 255, 255, 0.1);
            border-radius: 15px;
            margin: 20px 0;
            border: 2px solid #00ffff;
        }
        
        .progress-bar {
            width: 100%;
            height: 30px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            overflow: hidden;
            margin: 15px 0;
            border: 2px solid #00ffff;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ffff, #00ff00);
            width: 0%;
            transition: width 0.5s ease;
            box-shadow: 0 0 20px #00ffff;
        }
        
        .rocket-display {
            text-align: center;
            font-size: 4em;
            margin: 20px 0;
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        .phase-indicator {
            text-align: center;
            font-size: 1.3em;
            color: #ffff00;
            margin: 15px 0;
            text-shadow: 0 0 10px #ffff00;
        }
        
        .question-card {
            background: rgba(48, 43, 99, 0.9);
            padding: 25px;
            margin: 25px 0;
            border-radius: 15px;
            border: 2px solid #00ffff;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.2);
        }
        
        .question-card h3 {
            color: #00ffff;
            margin-bottom: 20px;
            font-size: 1.4em;
        }
        
        .question-text {
            font-size: 1.2em;
            margin: 15px 0;
            line-height: 1.6;
        }
        
        .options {
            margin: 20px 0;
        }
        
        .option {
            display: block;
            padding: 15px;
            margin: 10px 0;
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid #00ffff;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .option:hover {
            background: rgba(0, 255, 255, 0.2);
            transform: translateX(10px);
            box-shadow: 0 0 15px #00ffff;
        }
        
        .option input {
            margin-right: 10px;
        }
        
        .matching-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 20px 0;
        }
        
        .matching-column h4 {
            color: #ffff00;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .match-item {
            padding: 15px;
            margin: 10px 0;
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid #00ffff;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .match-item:hover {
            background: rgba(0, 255, 255, 0.3);
            transform: scale(1.05);
        }
        
        .match-item.selected {
            background: rgba(255, 255, 0, 0.3);
            border-color: #ffff00;
            box-shadow: 0 0 15px #ffff00;
        }
        
        .match-item.matched {
            background: rgba(0, 255, 0, 0.2);
            border-color: #00ff00;
            opacity: 0.7;
        }
                
        .input-answer {
            width: 100%;
            padding: 15px;
            font-size: 1.2em;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid #00ffff;
            border-radius: 10px;
            color: white;
            margin: 10px 0;
        }
        
        .btn {
            background: linear-gradient(135deg, #00ffff, #00ff00);
            color: black;
            border: none;
            padding: 15px 40px;
            font-size: 1.3em;
            font-weight: bold;
            border-radius: 10px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
        }
        
        .btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.8);
        }
        
        .btn:disabled {
            background: gray;
            cursor: not-allowed;
            opacity: 0.5;
        }
        
        .feedback {
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            font-size: 1.2em;
            text-align: center;
            display: none;
        }
        
        .feedback.correct {
            background: rgba(0, 255, 0, 0.3);
            border: 2px solid #00ff00;
            box-shadow: 0 0 20px #00ff00;
        }
        
        .feedback.incorrect {
            background: rgba(255, 0, 0, 0.3);
            border: 2px solid #ff0000;
            box-shadow: 0 0 20px #ff0000;
        }
        
        .final-screen {
            text-align: center;
            padding: 40px;
            display: none;
        }
        
        .final-screen h2 {
            font-size: 3em;
            color: #00ff00;
            margin: 20px 0;
            text-shadow: 0 0 30px #00ff00;
        }
        
        .final-emoji {
            font-size: 6em;
            margin: 20px 0;
            animation: bounce 1s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-30px); }
        }
        
        .controls {
            text-align: center;
            margin: 30px 0;
        }
        
        .score-display {
            font-size: 1.3em;
            color: #00ff00;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    
    <div class="container">
        <h1>üöÄ MISI√ìN ESPACIAL: DESTINO LUNA üåô</h1>
        
        <div class="mission-status">
            <div class="rocket-display" id="rocketDisplay">üöÄ</div>
            <div class="phase-indicator" id="phaseText">FASE 1: PREPARACI√ìN DEL COHETE</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            <p id="progressText">Pregunta 1 de 30 | Combustible: 0%</p>
        </div>
        
        <div id="questionsContainer"></div>
        
        <div class="controls">
            <button class="btn" id="checkBtn">üîç VERIFICAR RESPUESTA</button>
            <button class="btn" id="nextBtn" style="display:none;">‚û°Ô∏è SIGUIENTE</button>
        </div>
        
        <div class="feedback" id="feedback"></div>
        
        <div class="final-screen" id="finalScreen">
            <div class="final-emoji">üåôüë®‚ÄçüöÄüéâ</div>
            <h2>¬°MISI√ìN CUMPLIDA!</h2>
            <p id="finalMessage" style="font-size: 1.5em; margin: 20px 0;"></p>
            <p id="finalScore" style="font-size: 2.5em; color: #00ff00;"></p>
            <div class="score-display" id="scoreBreakdown"></div>
            <button class="btn" onclick="location.reload()">üîÑ NUEVA MISI√ìN</button>
        </div>
    </div>
    
    <script>
        // Crear estrellas
        const starsContainer = document.getElementById('stars');
        for (let i = 0; i < 100; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.width = Math.random() * 3 + 'px';
            star.style.height = star.style.width;
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 3 + 's';
            starsContainer.appendChild(star);
        }
        
        let currentQuestion = 0;
        let score = 0;
        let matchingPairs = {};
        
        const questions = [
            // FASE 1: PREPARACI√ìN (10 preguntas)
            {
                phase: 1,
                question: "üîß El cohete necesita 45 litros de combustible. Ya tiene 28 litros. ¬øCu√°ntos litros faltan?",
                type: "input",
                correct: "17"
            },
            {
                phase: 1,
                question: "üë®‚ÄçüöÄ Si cada astronauta necesita 3 trajes espaciales y hay 4 astronautas, ¬øcu√°ntos trajes se necesitan?",
                type: "multiple",
                options: ["10 trajes", "12 trajes", "15 trajes", "16 trajes"],
                correct: 1
            },
            {
                phase: 1,
                question: "‚öñÔ∏è El cohete pesa 1.500 kg y la c√°psula pesa 850 kg. ¬øCu√°nto pesan juntos?",
                type: "multiple",
                options: ["2.250 kg", "2.350 kg", "2.450 kg", "2.550 kg"],
                correct: 1
            },
            {
                phase: 1,
                question: "üßÆ Completa: 6 √ó 8 = __",
                type: "input",
                correct: "48"
            },
            {
                phase: 1,
                question: "‚è∞ Si el despegue es a las 14:30 y faltan 2 horas y 45 minutos, ¬øqu√© hora es ahora?",
                type: "multiple",
                options: ["11:30", "11:45", "12:15", "12:45"],
                correct: 1
            },
            {
                phase: 1,
                question: "‚ûó ¬øCu√°nto es 72 √∑ 9?",
                type: "input",
                correct: "8"
            },
            {
                phase: 1,
                question: "üî¢ Conecta cada multiplicaci√≥n con su resultado:",
                type: "matching",
                pairs: [
                    {left: "5 √ó 7", right: "35"},
                    {left: "8 √ó 6", right: "48"},
                    {left: "9 √ó 4", right: "36"}
                ]
            },
            {
                phase: 1,
                question: "üöÄ El cohete viaja a 450 km/h. ¬øCu√°ntos kil√≥metros recorre en 3 horas?",
                type: "input",
                correct: "1350"
            },
            {
                phase: 1,
                question: "‚úñÔ∏è ¬øCu√°l es el doble de 125?",
                type: "multiple",
                options: ["225", "235", "245", "250"],
                correct: 3
            },
            {
                phase: 1,
                question: "üî¢ Si 3 astronautas tardan 6 d√≠as en preparar el cohete, ¬øcu√°ntos d√≠as tardan 6 astronautas?",
                type: "multiple",
                options: ["2 d√≠as", "3 d√≠as", "4 d√≠as", "12 d√≠as"],
                correct: 1
            },
            
            // FASE 2: N√öMEROS ROMANOS (8 preguntas)
            {
                phase: 2,
                question: "üèõÔ∏è ¬øC√≥mo se escribe 15 en n√∫meros romanos?",
                type: "multiple",
                options: ["XIV", "XV", "XVI", "XVII"],
                correct: 1
            },
            {
                phase: 2,
                question: "üî¢ Conecta cada n√∫mero romano con su valor:",
                type: "matching",
                pairs: [
                    {left: "XXX", right: "30"},
                    {left: "L", right: "50"},
                    {left: "C", right: "100"}
                ]
            },
            {
                phase: 2,
                question: "‚ùì ¬øQu√© n√∫mero representa XL?",
                type: "input",
                correct: "40"
            },
            {
                phase: 2,
                question: "üèõÔ∏è ¬øC√≥mo se escribe 90 en n√∫meros romanos?",
                type: "multiple",
                options: ["LXXXX", "XC", "LXXX", "IC"],
                correct: 1
            },
            {
                phase: 2,
                question: "üî¢ ¬øCu√°l es el valor de XXVII?",
                type: "input",
                correct: "27"
            },
            {
                phase: 2,
                question: "üìä Conecta estos n√∫meros romanos con sus valores:",
                type: "matching",
                pairs: [
                    {left: "XIX", right: "19"},
                    {left: "XXIV", right: "24"},
                    {left: "XXXV", right: "35"}
                ]
            },
            {
                phase: 2,
                question: "üèõÔ∏è ¬øC√≥mo se escribe 49 en n√∫meros romanos?",
                type: "multiple",
                options: ["XLIV", "XLIX", "IL", "XXXXIX"],
                correct: 1
            },
            {
                phase: 2,
                question: "üî¢ ¬øQu√© n√∫mero representa CD?",
                type: "multiple",
                options: ["100", "400", "500", "600"],
                correct: 1
            },
            
            // FASE 3: DESPEGUE (7 preguntas)
            {
                phase: 3,
                question: "üåç La √≥rbita est√° a 408 km de altura. ¬øCu√°ntos metros son?",
                type: "multiple",
                options: ["40.800 m", "408.000 m", "4.080 m", "4.080.000 m"],
                correct: 1
            },
            {
                phase: 3,
                question: "üîÑ Si una vuelta a la Tierra tarda 90 minutos, ¬øcu√°nto tardan 12 vueltas?",
                type: "input",
                correct: "1080"
            },
            {
                phase: 3,
                question: "‚ûó ¬øCu√°nto es 144 √∑ 12?",
                type: "input",
                correct: "12"
            },
            {
                phase: 3,
                question: "üìä Conecta cada fracci√≥n con su porcentaje:",
                type: "matching",
                pairs: [
                    {left: "1/2", right: "50%"},
                    {left: "1/4", right: "25%"},
                    {left: "3/4", right: "75%"}
                ]
            },
            {
                phase: 3,
                question: "‚ûó ¬øCu√°l es la mitad de 380?",
                type: "multiple",
                options: ["180", "185", "190", "195"],
                correct: 2
            },
            {
                phase: 3,
                question: "‚õΩ Si el cohete consume 15 litros por minuto, ¬øcu√°nto consume en 20 minutos?",
                type: "input",
                correct: "300"
            },
            {
                phase: 3,
                question: "‚úñÔ∏è ¬øCu√°nto es 25 √ó 16?",
                type: "multiple",
                options: ["380", "390", "400", "410"],
                correct: 2
            },
            
            // FASE 4: VIAJE A LA LUNA - Ciencias (5 preguntas)
            {
                phase: 4,
                question: "üåç ¬øCu√°l es la forma m√°s exacta de representar la Tierra?",
                type: "multiple",
                options: ["Mapa plano", "Globo terr√°queo", "Fotograf√≠a", "Dibujo"],
                correct: 1
            },
            {
                phase: 4,
                question: "üß≠ Conecta cada instrumento con su uso:",
                type: "matching",
                pairs: [
                    {left: "Astrolabio", right: "Medir Sol"},
                    {left: "Br√∫jula", right: "Mantener rumbo"},
                    {left: "GPS", right: "Ubicaci√≥n actual"}
                ]
            },
            {
                phase: 4,
                question: "üå± Selecciona los 3 motivos de vida en la Tierra:",
                type: "checkbox",
                options: [
                    "Distancia del Sol",
                    "Muchos sat√©lites",
                    "Capa de aire",
                    "Tiene agua",
                    "Planeta m√°s grande"
                ],
                correct: [0, 2, 3]
            },
            {
                phase: 4,
                question: "‚≠ê ¬øQu√© estrella guiaba a los navegantes de noche?",
                type: "multiple",
                options: ["El Sol", "Estrella Polar", "J√∫piter", "La Luna"],
                correct: 1
            },
            {
                phase: 4,
                question: "üá™üá∏ Conecta cada punto cardinal con su l√≠mite:",
                type: "matching",
                pairs: [
                    {left: "Norte", right: "Francia"},
                    {left: "Oeste", right: "Portugal"},
                    {left: "Este", right: "Baleares"}
                ]
            }
        ];
        
        const rocketPhases = {1: "üöÄ", 2: "üõ∏", 3: "üåçüöÄ", 4: "üåôüöÄ"};
        const phaseNames = {
            1: "FASE 1: PREPARACI√ìN DEL COHETE",
            2: "FASE 2: N√öMEROS ROMANOS GAL√ÅCTICOS",
            3: "FASE 3: DESPEGUE Y √ìRBITA",
            4: "FASE 4: VIAJE A LA LUNA"
        };
        
        function loadQuestion() {
            const q = questions[currentQuestion];
            const container = document.getElementById('questionsContainer');
            
            document.getElementById('rocketDisplay').textContent = rocketPhases[q.phase];
            document.getElementById('phaseText').textContent = phaseNames[q.phase];
            
            const progress = ((currentQuestion) / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressText').textContent = 
                `Pregunta ${currentQuestion + 1} de ${questions.length} | Combustible: ${Math.round(progress)}%`;
            
            let html = `<div class="question-card">
                <h3>‚≠ê PREGUNTA ${currentQuestion + 1}</h3>
                <p class="question-text">${q.question}</p>`;
            
            matchingPairs = {};
            
            if (q.type === 'multiple') {
                html += '<div class="options">';
                q.options.forEach((opt, i) => {
                    html += `<label class="option">
                        <input type="radio" name="answer" value="${i}">
                        ${opt}
                    </label>`;
                });
                html += '</div>';
            } else if (q.type === 'checkbox') {
                html += '<div class="options">';
                q.options.forEach((opt, i) => {
                    html += `<label class="option">
                        <input type="checkbox" name="answer" value="${i}">
                        ${opt}
                    </label>`;
                });
                html += '</div>';
            } else if (q.type === 'input') {
                html += '<input type="text" class="input-answer" id="userInput" placeholder="Escribe tu respuesta...">';
            } else if (q.type === 'matching') {
                html += '<p style="color: #ffff00; margin: 15px 0;">Haz clic en la izquierda, luego en su pareja:</p>';
                html += '<div class="matching-container">';
                html += '<div class="matching-column"><h4>Conecta:</h4>';
                q.pairs.forEach((pair, i) => {
                    html += `<div class="match-item" data-type="left" data-index="${i}">${pair.left}</div>`;
                });
                html += '</div><div class="matching-column"><h4>Con:</h4>';
                const shuffled = [...q.pairs].sort(() => Math.random() - 0.5);
                shuffled.forEach((pair) => {
                    html += `<div class="match-item" data-type="right" data-value="${pair.right}">${pair.right}</div>`;
                });
                html += '</div></div>';
            }
            
            html += '</div>';
            container.innerHTML = html;
            
            if (q.type === 'matching') {
                initMatching();
            }
            
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('checkBtn').style.display = 'inline-block';
            document.getElementById('nextBtn').style.display = 'none';
        }
        
        let selectedLeft = null;
        
        function initMatching() {
            const items = document.querySelectorAll('.match-item');
            
            items.forEach(item => {
                item.addEventListener('click', function() {
                    if (this.classList.contains('matched')) return;
                    
                    const type = this.dataset.type;
                    const index = this.dataset.index;
                    
                    if (type === 'left') {
                        items.forEach(i => {
                            if (i.dataset.type === 'left') i.classList.remove('selected');
                        });
                        this.classList.add('selected');
                        selectedLeft = index;
                    } else if (type === 'right' && selectedLeft !== null) {
                        matchingPairs[selectedLeft] = this.dataset.value;
                        this.classList.add('matched');
                        items.forEach(i => {
                            if (i.dataset.type === 'left' && i.dataset.index === selectedLeft) {
                                i.classList.add('matched');
                            }
                        });
                        selectedLeft = null;
                    }
                });
            });
        }
        
        document.getElementById('checkBtn').addEventListener('click', function() {
            const q = questions[currentQuestion];
            const feedback = document.getElementById('feedback');
            let isCorrect = false;
            
            if (q.type === 'multiple') {
                const selected = document.querySelector('input[name="answer"]:checked');
                if (!selected) {
                    alert('‚ö†Ô∏è Selecciona una respuesta');
                    return;
                }
                isCorrect = parseInt(selected.value) === q.correct;
            } else if (q.type === 'checkbox') {
                const checkboxes = document.querySelectorAll('input[name="answer"]:checked');
                const selectedIndices = Array.from(checkboxes).map(cb => parseInt(cb.value)).sort((a,b) => a-b);
                isCorrect = JSON.stringify(selectedIndices) === JSON.stringify(q.correct);
            } else if (q.type === 'input') {
                const userInput = document.getElementById('userInput').value.trim();
                if (!userInput) {
                    alert('‚ö†Ô∏è Escribe una respuesta');
                    return;
                }
                isCorrect = userInput === q.correct;
            } else if (q.type === 'matching') {
                if (Object.keys(matchingPairs).length !== q.pairs.length) {
                    alert('‚ö†Ô∏è Conecta todas las parejas');
                    return;
                }
                isCorrect = true;
                q.pairs.forEach((pair, i) => {
                    if (matchingPairs[i] !== pair.right) {
                        isCorrect = false;
                    }
                });
            }
            
            if (isCorrect) {
                score++;
                feedback.textContent = 'üéâ ¬°CORRECTO! ¬°Excelente trabajo, astronauta!';
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = '‚ùå Incorrecto. ¬°Sigue intent√°ndolo!';
                feedback.className = 'feedback incorrect';
            }
            
            feedback.style.display = 'block';
            document.getElementById('checkBtn').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'inline-block';
        });
        
        document.getElementById('nextBtn').addEventListener('click', function() {
            currentQuestion++;
            
            if (currentQuestion < questions.length) {
                loadQuestion();
            } else {
                showFinalScreen();
            }
        });
        
        function showFinalScreen() {
            document.querySelector('.mission-status').style.display = 'none';
            document.getElementById('questionsContainer').style.display = 'none';
            document.querySelector('.controls').style.display = 'none';
            document.getElementById('feedback').style.display = 'none';
            
            const finalScreen = document.getElementById('finalScreen');
            const percentage = (score / questions.length) * 100;
            
            let message = '';
            if (percentage === 100) {
                message = 'üèÜ ¬°PERFECTO! ¬°Eres un ASTRONAUTA LEGENDARIO!';
            } else if (percentage >= 90) {
                message = 'üåü ¬°EXCELENTE! ¬°Astronauta de Elite!';
            } else if (percentage >= 80) {
                message = '‚≠ê ¬°MUY BIEN! ¬°Gran Astronauta!';
            } else if (percentage >= 70) {
                message = 'üëç ¬°BIEN HECHO! ¬°Buen Astronauta!';
            } else if (percentage >= 60) {
                message = 'üöÄ ¬°LO LOGRASTE! ¬°Astronauta en Entrenamiento!';
            } else {
                message = 'üí™ ¬°Sigue practicando! ¬°Ser√°s un gran astronauta!';
            }
            
            document.getElementById('finalMessage').textContent = message;
            document.getElementById('finalScore').textContent = `${score} / ${questions.length} CORRECTAS`;
            document.getElementById('scoreBreakdown').textContent = `Porcentaje: ${percentage.toFixed(1)}%`;
            
            finalScreen.style.display = 'block';
        }
        
        // INICIAR JUEGO
        loadQuestion();
    </script>
</body>
</html>